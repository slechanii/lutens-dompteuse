{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/slechani/react-ladompteuse-website/src/components/modalcarousel/ModalCarousel.tsx\";\nimport React, { createRef } from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs from 'video.js';\nimport { isMobile } from 'mobile-device-detect';\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport 'simplebar/dist/simplebar.min.css';\nimport './ModalCarousel.css';\nimport Mute from '../mute/Mute';\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  muted: true,\n  controls: false,\n  fill: true,\n  preload: 'auto'\n};\nModal.setAppElement('#root');\nconst styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'none'\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20\n  }\n};\n\nclass ModalCarousel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.video1Ref = /*#__PURE__*/createRef();\n    this.video2Ref = /*#__PURE__*/createRef();\n    this.videoJs1 = null;\n    this.videoJs2 = null;\n\n    this._setupVideoJs1 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video1Ref: this.video1Ref.current,\n        videoJs1: this.videoJs1\n      });\n\n      if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n        this.videoJs1 = videojs(this.video1Ref.current, options);\n        this.videoJs1.one('ended', () => console.log('video1 ended'));\n        this.videoJs1.loop(false);\n        this.videoJs1.autoplay(true);\n      } else if (this.videoJs1) {\n        this.videoJs1.play();\n      }\n\n      if (isMobile && this.videoJs1 !== null) {\n        this.videoJs1.play();\n      }\n    };\n\n    this._setupVideoJs2 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video2Ref: this.video2Ref.current,\n        videoJs2: this.videoJs2\n      });\n\n      if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n        this.videoJs2 = videojs(this.video2Ref.current, options);\n        this.videoJs2.one('ended', () => console.log('video1 ended'));\n        this.videoJs2.loop(false);\n        this.videoJs2.autoplay(true);\n      } else if (this.videoJs2) {\n        this.videoJs2.play();\n      }\n\n      if (isMobile && this.videoJs2 !== null) {\n        this.videoJs2.play();\n      }\n    };\n\n    this._dispose = () => {\n      console.log('_dispose');\n\n      if (this.videoJs1 !== null) {\n        this.videoJs1.dispose();\n        this.videoJs1 = null;\n      }\n\n      if (this.videoJs2 !== null) {\n        this.videoJs2.dispose();\n        this.videoJs2 = null;\n      }\n    };\n\n    this._onAfterOpen = () => {\n      this._setupVideoJs1();\n    };\n\n    this._onAfterClose = () => {\n      this._dispose();\n\n      this.setState({\n        slideIndex: 0\n      });\n    };\n\n    this.state = {\n      slideIndex: 0,\n      mute1: true,\n      mute2: true\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log('componentDidUpdate');\n\n    if (this.state.slideIndex === 3 && prevProps.isOpen === true) {\n      this._setupVideoJs2();\n    }\n\n    if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n      this._setupVideoJs1();\n    }\n  }\n\n  render() {\n    const {\n      slideIndex,\n      mute1,\n      mute2\n    } = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      imageTitle,\n      description,\n      imageMobileBackground\n    } = this.props;\n    let backgroundImage = '';\n\n    if (slideIndex === 2 && isMobile) {\n      backgroundImage = `url(${imageMobileBackground})`;\n    } else if (slideIndex === 2) {\n      backgroundImage = `var(--background-image-slide3)`;\n    }\n\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpen,\n      style: styles,\n      onAfterOpen: this._onAfterOpen,\n      onAfterClose: this._onAfterClose,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-carousel\",\n        style: {\n          ['--background-image']: backgroundImage\n        },\n        children: [/*#__PURE__*/_jsxDEV(Carousel, {\n          interval: null,\n          activeIndex: slideIndex,\n          onSelect: slideIndex => this.setState({\n            slideIndex\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video1Ref,\n              className: \"video-js custom-videojs\",\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Mute, {\n              isMuted: mute1,\n              onClick: () => {\n                var _this$videoJs;\n\n                this.setState({\n                  mute1: !mute1\n                });\n                (_this$videoJs = this.videoJs1) === null || _this$videoJs === void 0 ? void 0 : _this$videoJs.muted(!mute1);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-2-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"citation\",\n                  children: citation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"serge\",\n                  children: \"Serge Lutens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: citationSmall\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-3-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: imageTitle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video2Ref,\n              className: \"video-js custom-videojs\",\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Mute, {\n              isMuted: mute2,\n              onClick: () => {\n                var _this$videoJs2;\n\n                this.setState({\n                  mute2: !mute2\n                });\n                (_this$videoJs2 = this.videoJs2) === null || _this$videoJs2 === void 0 ? void 0 : _this$videoJs2.muted(!mute2);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"close-btn clickable\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeBtn,\n            srcSet: closeBtn2x,\n            onClick: onClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ModalCarousel;","map":{"version":3,"sources":["/home/slechani/react-ladompteuse-website/src/components/modalcarousel/ModalCarousel.tsx"],"names":["React","createRef","Modal","Carousel","videojs","isMobile","closeBtn","closeBtn2x","Mute","options","html5","fluid","loop","muted","controls","fill","preload","setAppElement","styles","overlay","zIndex","background","content","border","padding","backgroundColor","top","bottom","left","right","ModalCarousel","Component","constructor","props","video1Ref","video2Ref","videoJs1","videoJs2","_setupVideoJs1","console","log","current","undefined","one","autoplay","play","_setupVideoJs2","_dispose","dispose","_onAfterOpen","_onAfterClose","setState","slideIndex","state","mute1","mute2","componentDidUpdate","prevProps","isOpen","render","onClose","video1","video1Webm","video2","video2Webm","citation","citationSmall","image","imageTitle","description","imageMobileBackground","backgroundImage"],"mappings":"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","sourcesContent":["import React, {createRef} from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs, {VideoJsPlayer} from 'video.js';\nimport {isMobile} from 'mobile-device-detect';\n\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport 'simplebar/dist/simplebar.min.css';\nimport './ModalCarousel.css';\nimport Mute from '../mute/Mute';\n\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  muted: true,\n  controls: false,\n  fill: true,\n  preload: 'auto',\n};\n\nModal.setAppElement('#root');\n\nconst styles: Modal.Styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'none',\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20,\n  },\n};\n\ntype Props = {\n  isOpen: boolean;\n  video1: string;\n  video1Webm: string;\n  video2: string;\n  video2Webm: string;\n  citation: string;\n  citationSmall: string;\n  image: string;\n  imageMobileBackground: string;\n  imageTitle: string;\n  description: string;\n  onClose?: () => void;\n};\n\ntype State = {\n  slideIndex: number;\n  mute1: boolean;\n  mute2: boolean;\n};\n\nclass ModalCarousel extends React.Component<Props, State> {\n  private video1Ref = createRef<HTMLVideoElement>();\n  private video2Ref = createRef<HTMLVideoElement>();\n  private videoJs1: VideoJsPlayer | null = null;\n  private videoJs2: VideoJsPlayer | null = null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      slideIndex: 0,\n      mute1: true,\n      mute2: true,\n    };\n  }\n  componentDidUpdate(prevProps: Props): void {\n    console.log('componentDidUpdate');\n    if (this.state.slideIndex === 3 && prevProps.isOpen === true) {\n      this._setupVideoJs2();\n    }\n    if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n      this._setupVideoJs1();\n    }\n  }\n\n  _setupVideoJs1 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video1Ref: this.video1Ref.current, videoJs1: this.videoJs1});\n    if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n      this.videoJs1 = videojs(this.video1Ref.current, options);\n      this.videoJs1.one('ended', () => console.log('video1 ended'));\n      this.videoJs1.loop(false);\n      this.videoJs1.autoplay(true);\n    } else if (this.videoJs1) {\n      this.videoJs1.play();\n    }\n    if (isMobile && this.videoJs1 !== null) {\n      this.videoJs1.play();\n    }\n  };\n  _setupVideoJs2 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video2Ref: this.video2Ref.current, videoJs2: this.videoJs2});\n    if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n      this.videoJs2 = videojs(this.video2Ref.current, options);\n      this.videoJs2.one('ended', () => console.log('video1 ended'));\n      this.videoJs2.loop(false);\n      this.videoJs2.autoplay(true);\n    } else if (this.videoJs2) {\n      this.videoJs2.play();\n    }\n    if (isMobile && this.videoJs2 !== null) {\n      this.videoJs2.play();\n    }\n  };\n\n  _dispose = (): void => {\n    console.log('_dispose');\n    if (this.videoJs1 !== null) {\n      this.videoJs1.dispose();\n      this.videoJs1 = null;\n    }\n    if (this.videoJs2 !== null) {\n      this.videoJs2.dispose();\n      this.videoJs2 = null;\n    }\n  };\n  _onAfterOpen = (): void => {\n    this._setupVideoJs1();\n  };\n\n  _onAfterClose = (): void => {\n    this._dispose();\n    this.setState({slideIndex: 0});\n  };\n\n  render(): JSX.Element {\n    const {slideIndex, mute1, mute2} = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      imageTitle,\n      description,\n      imageMobileBackground,\n    } = this.props;\n    let backgroundImage = '';\n    if (slideIndex === 2 && isMobile) {\n      backgroundImage = `url(${imageMobileBackground})`;\n    } else if (slideIndex === 2) {\n      backgroundImage = `var(--background-image-slide3)`;\n    }\n    return (\n      <Modal isOpen={isOpen} style={styles} onAfterOpen={this._onAfterOpen} onAfterClose={this._onAfterClose}>\n        <div\n          className=\"modal-carousel\"\n          style={{\n            ['--background-image' as any]: backgroundImage,\n          }}>\n          <Carousel interval={null} activeIndex={slideIndex} onSelect={(slideIndex) => this.setState({slideIndex})}>\n            <Carousel.Item>\n              <video\n                ref={this.video1Ref}\n                className=\"video-js custom-videojs\"\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video1} type=\"video/mp4\" />\n                <source src={video1Webm} type=\"video/webm\" />\n              </video>\n              <Mute\n                isMuted={mute1}\n                onClick={() => {\n                  this.setState({mute1: !mute1});\n                  this.videoJs1?.muted(!mute1);\n                }}\n              />\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-2\">\n                <div className=\"section-2-content\">\n                  <h2 className=\"citation\">{citation}</h2>\n                  <h2 className=\"serge\">Serge Lutens</h2>\n                  <hr />\n                  <small>{citationSmall}</small>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-3\">\n                <div className=\"section-3-content\">\n                  <img src={image} />\n                  <div>\n                    <h3>{imageTitle}</h3>\n                    <p>{description}</p>\n                  </div>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <video\n                ref={this.video2Ref}\n                className=\"video-js custom-videojs\"\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video2} type=\"video/mp4\" />\n                <source src={video2Webm} type=\"video/webm\" />\n              </video>\n              <Mute\n                isMuted={mute2}\n                onClick={() => {\n                  this.setState({mute2: !mute2});\n                  this.videoJs2?.muted(!mute2);\n                }}\n              />\n            </Carousel.Item>\n          </Carousel>\n          <div className=\"close-btn clickable\">\n            <img src={closeBtn} srcSet={closeBtn2x} onClick={onClose} />\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default ModalCarousel;\n"]},"metadata":{},"sourceType":"module"}