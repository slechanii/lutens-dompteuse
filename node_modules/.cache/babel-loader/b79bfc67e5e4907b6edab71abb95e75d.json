{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/slechani/react-ladompteuse-website/src/components/videomodal/VideoModal.tsx\";\nimport React, { createRef } from 'react';\nimport videojs from 'video.js';\nimport gsap from 'gsap';\nimport Modal from 'react-modal';\nimport { isMobile } from 'mobile-device-detect';\nimport Mute from '../mute/Mute';\nimport './VideoModal.css';\nModal.setAppElement('#root');\nconst styles = {\n  content: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    inset: 0,\n    width: '100vw',\n    height: '100vh',\n    padding: 0,\n    overflow: 'hidden',\n    border: 'none',\n    zIndex: 3000,\n    backgroundColor: 'black'\n  },\n  overlay: {\n    zIndex: 10,\n    backgroundColor: 'black'\n  }\n};\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n\n  /*muted: true,*/\n  controls: false,\n  fill: true,\n  preload: 'auto'\n};\n\nclass VideoModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.ref = /*#__PURE__*/createRef();\n    this.videoJs = null;\n\n    this._setupVideoJs = () => {\n      var _this$ref$current;\n\n      console.log('_setupVideoJs');\n      const videoElement = (_this$ref$current = this.ref.current) === null || _this$ref$current === void 0 ? void 0 : _this$ref$current.querySelector('video');\n      console.log({\n        videoElement,\n        ref: this.ref.current\n      });\n\n      if (videoElement !== undefined && videoElement !== null) {\n        this.videoJs = videojs(videoElement, options);\n        this.videoJs.one('ended', () => this._onVideoEnd());\n        this.videoJs.muted(true);\n        this.videoJs.loop(false);\n        this.videoJs.playsinline(true);\n        this.videoJs.autoplay('muted');\n        this.videoJs.autoplay(true);\n\n        if (isMobile) {\n          this.videoJs.play();\n        }\n      }\n    };\n\n    this._dispose = () => {\n      console.log('_dispose');\n\n      if (this.videoJs !== null) {\n        this.videoJs.dispose();\n        this.videoJs = null;\n      }\n    };\n\n    this._onVideoEnd = () => {\n      console.log('_onVideoEnd');\n      gsap.timeline({\n        onComplete: () => {\n          if (this.props.onVideoEnded) {\n            this.props.onVideoEnded();\n          }\n        }\n      }).to(this.ref.current, {\n        opacity: 0,\n        duration: 3\n      });\n    };\n\n    this._onAfterOpen = () => {\n      console.log('_onAfterOpen');\n\n      this._setupVideoJs();\n\n      gsap.fromTo(this.ref.current, {\n        opacity: 0\n      }, {\n        opacity: 1,\n        duration: 3\n      });\n    };\n\n    this.state = {\n      mute: true\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.videoJs === null) {\n      this._setupVideoJs();\n    }\n  }\n\n  render() {\n    const {\n      isOpen,\n      video,\n      videoWebm\n    } = this.props;\n    const {\n      mute\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpen,\n      style: styles,\n      onAfterOpen: this._onAfterOpen,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-modal\",\n        ref: this.ref,\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          className: `video-js vjs-control-bar ${isMobile ? '' : 'vjs-16-9'}`,\n          playsInline: true,\n          \"webkit-playsinline\": \"true\",\n          controls: false,\n          children: [/*#__PURE__*/_jsxDEV(\"source\", {\n            src: video,\n            type: \"video/mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n            src: videoWebm,\n            type: \"video/webm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Mute, {\n          className: \"mute\",\n          isMuted: mute,\n          onClick: () => {\n            var _this$videoJs;\n\n            this.setState({\n              mute: !mute\n            });\n            (_this$videoJs = this.videoJs) === null || _this$videoJs === void 0 ? void 0 : _this$videoJs.muted(!mute);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default VideoModal;","map":{"version":3,"sources":["/home/slechani/react-ladompteuse-website/src/components/videomodal/VideoModal.tsx"],"names":["React","createRef","videojs","gsap","Modal","isMobile","Mute","setAppElement","styles","content","top","left","right","bottom","inset","width","height","padding","overflow","border","zIndex","backgroundColor","overlay","options","html5","fluid","loop","controls","fill","preload","VideoModal","Component","constructor","props","ref","videoJs","_setupVideoJs","console","log","videoElement","current","querySelector","undefined","one","_onVideoEnd","muted","playsinline","autoplay","play","_dispose","dispose","timeline","onComplete","onVideoEnded","to","opacity","duration","_onAfterOpen","fromTo","state","mute","componentDidUpdate","render","isOpen","video","videoWebm","setState"],"mappings":"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","sourcesContent":["import React, {createRef} from 'react';\nimport videojs, {VideoJsPlayer} from 'video.js';\nimport gsap from 'gsap';\nimport Modal from 'react-modal';\nimport {isMobile} from 'mobile-device-detect';\nimport Mute from '../mute/Mute';\n\nimport './VideoModal.css';\n\nModal.setAppElement('#root');\n\ntype Props = {\n  isOpen: boolean;\n  video: string;\n  videoWebm: string;\n  onVideoEnded?: () => void;\n};\n\nconst styles: Modal.Styles = {\n  content: {\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    inset: 0,\n    width: '100vw',\n    height: '100vh',\n    padding: 0,\n    overflow: 'hidden',\n    border: 'none',\n    zIndex: 3000,\n    backgroundColor: 'black',\n  },\n  overlay: {\n    zIndex: 10,\n    backgroundColor: 'black',\n  },\n};\n\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  /*muted: true,*/\n  controls: false,\n  fill: true,\n  preload: 'auto',\n};\n\ntype State = {\n  mute: boolean;\n};\n\nclass VideoModal extends React.Component<Props, State> {\n  private ref = createRef<HTMLDivElement>();\n  private videoJs: VideoJsPlayer | null = null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      mute: true,\n    };\n  }\n\n  componentDidUpdate(): void {\n    if (this.videoJs === null) {\n      this._setupVideoJs();\n    }\n  }\n\n  _setupVideoJs = (): void => {\n    console.log('_setupVideoJs');\n    const videoElement = this.ref.current?.querySelector('video');\n    console.log({videoElement, ref: this.ref.current});\n    if (videoElement !== undefined && videoElement !== null) {\n      this.videoJs = videojs(videoElement, options);\n      this.videoJs.one('ended', () => this._onVideoEnd());\n      this.videoJs.muted(true);\n      this.videoJs.loop(false);\n      this.videoJs.playsinline(true);\n      this.videoJs.autoplay('muted');\n      this.videoJs.autoplay(true);\n      if (isMobile) {\n        this.videoJs.play();\n      }\n    }\n  };\n\n  _dispose = (): void => {\n    console.log('_dispose');\n    if (this.videoJs !== null) {\n      this.videoJs.dispose();\n      this.videoJs = null;\n    }\n  };\n\n  _onVideoEnd = (): void => {\n    console.log('_onVideoEnd');\n    gsap\n      .timeline({\n        onComplete: () => {\n          if (this.props.onVideoEnded) {\n            this.props.onVideoEnded();\n          }\n        },\n      })\n      .to(this.ref.current, {opacity: 0, duration: 3});\n  };\n\n  _onAfterOpen = (): void => {\n    console.log('_onAfterOpen');\n    this._setupVideoJs();\n    gsap.fromTo(this.ref.current, {opacity: 0}, {opacity: 1, duration: 3});\n  };\n\n  render(): JSX.Element {\n    const {isOpen, video, videoWebm} = this.props;\n    const {mute} = this.state;\n    return (\n      <Modal isOpen={isOpen} style={styles} onAfterOpen={this._onAfterOpen}>\n        <div className=\"video-modal\" ref={this.ref}>\n          <video\n            className={`video-js vjs-control-bar ${isMobile ? '' : 'vjs-16-9'}`}\n            playsInline\n            webkit-playsinline=\"true\"\n            controls={false}>\n            <source src={video} type=\"video/mp4\" />\n            <source src={videoWebm} type=\"video/webm\" />\n          </video>\n          <Mute\n            className=\"mute\"\n            isMuted={mute}\n            onClick={() => {\n              this.setState({mute: !mute});\n              this.videoJs?.muted(!mute);\n            }}\n          />\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default VideoModal;\n"]},"metadata":{},"sourceType":"module"}