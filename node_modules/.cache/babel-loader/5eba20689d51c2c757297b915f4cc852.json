{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/slechani/react-ladompteuse-website/src/components/modalcarousel/ModalCarousel.tsx\";\nimport React, { createRef } from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs from 'video.js';\nimport { isMobile } from 'mobile-device-detect';\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport backgroundMobile from '../../assets/img/Background_Slideshow_Mobile.png';\nimport backgroundMobile2x from '../../assets/img/Background_Slideshow_Mobile@2x.png';\nimport './ModalCarousel.css';\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  muted: true,\n  controls: false,\n  fill: true,\n  preload: 'auto'\n};\nModal.setAppElement('#root');\nconst styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'none'\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20\n  }\n};\n\nclass ModalCarousel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.video1Ref = /*#__PURE__*/createRef();\n    this.video2Ref = /*#__PURE__*/createRef();\n    this.videoJs1 = null;\n    this.videoJs2 = null;\n\n    this._setupVideoJs1 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video1Ref: this.video1Ref.current\n      });\n\n      if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n        this.videoJs1 = videojs(this.video1Ref.current, options);\n        this.videoJs1.one('ended', () => console.log('video1 ended'));\n        this.videoJs1.loop(false);\n        this.videoJs1.autoplay(true);\n      }\n\n      if (isMobile && this.videoJs1 !== null) {\n        this.videoJs1.play();\n      }\n    };\n\n    this._setupVideoJs2 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video2Ref: this.video2Ref.current\n      });\n\n      if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n        this.videoJs2 = videojs(this.video2Ref.current, options);\n        this.videoJs2.one('ended', () => console.log('video1 ended'));\n        this.videoJs2.loop(false);\n        this.videoJs2.autoplay(true);\n      }\n\n      if (isMobile && this.videoJs2 !== null) {\n        this.videoJs2.play();\n      }\n    };\n\n    this._dispose = () => {\n      console.log('_dispose');\n\n      if (this.videoJs1 !== null) {\n        this.videoJs1.dispose();\n        this.videoJs1 = null;\n      }\n\n      if (this.videoJs2 !== null) {\n        this.videoJs2.dispose();\n        this.videoJs2 = null;\n      }\n    };\n\n    this._onAfterOpen = () => {\n      this._setupVideoJs1();\n    };\n\n    this._onAfterClose = () => {\n      this._dispose();\n    };\n\n    this.state = {\n      slideIndex: 0\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log('componentDidUpdate');\n\n    if (this.state.slideIndex === 3) {\n      this._setupVideoJs2();\n    }\n\n    if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n      this._setupVideoJs1();\n    }\n  }\n\n  componentWillUnmount() {\n    console.log('componentWillUnmount');\n\n    this._dispose();\n  }\n\n  render() {\n    const {\n      slideIndex\n    } = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      image2x,\n      imageTitle,\n      description,\n      imageMobileBackground,\n      imageMobileBackground2x\n    } = this.props;\n    const backgroundImage = slideIndex === 2 ? `url(${imageMobileBackground})` : `url(${backgroundMobile})`;\n    const background2x = slideIndex === 2 ? `url(${imageMobileBackground2x})` : `url(${backgroundMobile2x})`;\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpen,\n      style: styles,\n      onAfterOpen: this._onAfterOpen,\n      onAfterClose: this._onAfterClose,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-carousel\",\n        style: {\n          ['--mobile-background-image']: backgroundImage,\n          ['--mobile-background-image-2x']: background2x\n        },\n        children: [/*#__PURE__*/_jsxDEV(Carousel, {\n          interval: null,\n          activeIndex: slideIndex,\n          onSelect: slideIndex => this.setState({\n            slideIndex\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video1Ref,\n              className: \"video-js custom-videojs\",\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-2-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"citation\",\n                  children: citation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"serge\",\n                  children: \"Serge Lutens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"blockquote\", {\n                  children: citationSmall\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-3-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: image,\n                  srcSet: image2x\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: imageTitle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video2Ref,\n              className: \"video-js custom-videojs\",\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"close-btn clickable\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeBtn,\n            srcSet: closeBtn2x,\n            onClick: onClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ModalCarousel;","map":{"version":3,"sources":["/home/slechani/react-ladompteuse-website/src/components/modalcarousel/ModalCarousel.tsx"],"names":["React","createRef","Modal","Carousel","videojs","isMobile","closeBtn","closeBtn2x","backgroundMobile","backgroundMobile2x","options","html5","fluid","loop","muted","controls","fill","preload","setAppElement","styles","overlay","zIndex","background","content","border","padding","backgroundColor","top","bottom","left","right","ModalCarousel","Component","constructor","props","video1Ref","video2Ref","videoJs1","videoJs2","_setupVideoJs1","console","log","current","undefined","one","autoplay","play","_setupVideoJs2","_dispose","dispose","_onAfterOpen","_onAfterClose","state","slideIndex","componentDidUpdate","prevProps","isOpen","componentWillUnmount","render","onClose","video1","video1Webm","video2","video2Webm","citation","citationSmall","image","image2x","imageTitle","description","imageMobileBackground","imageMobileBackground2x","backgroundImage","background2x","setState"],"mappings":"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","sourcesContent":["import React, {createRef} from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs, {VideoJsPlayer} from 'video.js';\nimport {isMobile} from 'mobile-device-detect';\n\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport backgroundMobile from '../../assets/img/Background_Slideshow_Mobile.png';\nimport backgroundMobile2x from '../../assets/img/Background_Slideshow_Mobile@2x.png';\nimport './ModalCarousel.css';\n\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  muted: true,\n  controls: false,\n  fill: true,\n  preload: 'auto',\n};\n\nModal.setAppElement('#root');\n\nconst styles: Modal.Styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'none',\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20,\n  },\n};\n\ntype Props = {\n  isOpen: boolean;\n  video1: string;\n  video1Webm: string;\n  video2: string;\n  video2Webm: string;\n  citation: string;\n  citationSmall: string;\n  image: string;\n  image2x: string;\n  imageMobileBackground: string;\n  imageMobileBackground2x: string;\n  imageTitle: string;\n  description: string;\n  onClose?: () => void;\n};\n\ntype State = {\n  slideIndex: number;\n};\n\nclass ModalCarousel extends React.Component<Props, State> {\n  private video1Ref = createRef<HTMLVideoElement>();\n  private video2Ref = createRef<HTMLVideoElement>();\n  private videoJs1: VideoJsPlayer | null = null;\n  private videoJs2: VideoJsPlayer | null = null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      slideIndex: 0,\n    };\n  }\n  componentDidUpdate(prevProps: Props): void {\n    console.log('componentDidUpdate');\n    if (this.state.slideIndex === 3) {\n      this._setupVideoJs2();\n    }\n    if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n      this._setupVideoJs1();\n    }\n  }\n\n  componentWillUnmount(): void {\n    console.log('componentWillUnmount');\n    this._dispose();\n  }\n\n  _setupVideoJs1 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video1Ref: this.video1Ref.current});\n    if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n      this.videoJs1 = videojs(this.video1Ref.current, options);\n      this.videoJs1.one('ended', () => console.log('video1 ended'));\n      this.videoJs1.loop(false);\n      this.videoJs1.autoplay(true);\n    }\n    if (isMobile && this.videoJs1 !== null) {\n      this.videoJs1.play();\n    }\n  };\n  _setupVideoJs2 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video2Ref: this.video2Ref.current});\n    if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n      this.videoJs2 = videojs(this.video2Ref.current, options);\n      this.videoJs2.one('ended', () => console.log('video1 ended'));\n      this.videoJs2.loop(false);\n      this.videoJs2.autoplay(true);\n    }\n    if (isMobile && this.videoJs2 !== null) {\n      this.videoJs2.play();\n    }\n  };\n\n  _dispose = (): void => {\n    console.log('_dispose');\n    if (this.videoJs1 !== null) {\n      this.videoJs1.dispose();\n      this.videoJs1 = null;\n    }\n    if (this.videoJs2 !== null) {\n      this.videoJs2.dispose();\n      this.videoJs2 = null;\n    }\n  };\n  _onAfterOpen = (): void => {\n    this._setupVideoJs1();\n  };\n\n  _onAfterClose = (): void => {\n    this._dispose();\n  };\n\n  render(): JSX.Element {\n    const {slideIndex} = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      image2x,\n      imageTitle,\n      description,\n      imageMobileBackground,\n      imageMobileBackground2x,\n    } = this.props;\n    const backgroundImage = slideIndex === 2 ? `url(${imageMobileBackground})` : `url(${backgroundMobile})`;\n    const background2x = slideIndex === 2 ? `url(${imageMobileBackground2x})` : `url(${backgroundMobile2x})`;\n    return (\n      <Modal isOpen={isOpen} style={styles} onAfterOpen={this._onAfterOpen} onAfterClose={this._onAfterClose}>\n        <div\n          className=\"modal-carousel\"\n          style={{\n            ['--mobile-background-image' as any]: backgroundImage,\n            ['--mobile-background-image-2x' as any]: background2x,\n          }}>\n          <Carousel interval={null} activeIndex={slideIndex} onSelect={(slideIndex) => this.setState({slideIndex})}>\n            <Carousel.Item>\n              <video\n                ref={this.video1Ref}\n                className=\"video-js custom-videojs\"\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video1} type=\"video/mp4\" />\n                <source src={video1Webm} type=\"video/webm\" />\n              </video>\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-2\">\n                <div className=\"section-2-content\">\n                  <h2 className=\"citation\">{citation}</h2>\n                  <h2 className=\"serge\">Serge Lutens</h2>\n                  <hr />\n                  <blockquote>{citationSmall}</blockquote>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-3\">\n                <div className=\"section-3-content\">\n                  <img src={image} srcSet={image2x} />\n                  <div>\n                    <h3>{imageTitle}</h3>\n                    <p>{description}</p>\n                  </div>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <video\n                ref={this.video2Ref}\n                className=\"video-js custom-videojs\"\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video2} type=\"video/mp4\" />\n                <source src={video2Webm} type=\"video/webm\" />\n              </video>\n            </Carousel.Item>\n          </Carousel>\n          <div className=\"close-btn clickable\">\n            <img src={closeBtn} srcSet={closeBtn2x} onClick={onClose} />\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default ModalCarousel;\n"]},"metadata":{},"sourceType":"module"}