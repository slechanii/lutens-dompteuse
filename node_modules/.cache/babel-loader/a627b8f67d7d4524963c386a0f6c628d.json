{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n\nvar react_1 = require(\"react\");\n\nfunction useDigitInput(_a) {\n  var acceptedCharacters = _a.acceptedCharacters,\n      length = _a.length,\n      value = _a.value,\n      onChange = _a.onChange;\n  var val = padValue(value, length);\n  var inputs = react_1.useRef(Array.from({\n    length: length\n  }));\n  var inputRefSetters = react_1.useRef(Array.from({\n    length: length\n  }));\n  var props = [];\n\n  var _loop_1 = function (i) {\n    var ref = inputRefSetters.current[i] = inputRefSetters.current[i] || function (input) {\n      inputs.current[i] = input || undefined;\n    };\n\n    var digitValue = val[i] === ' ' ? '' : val[i];\n    props.push({\n      ref: ref,\n      value: digitValue,\n      onClick: function (_a) {\n        var currentTarget = _a.currentTarget;\n        window.requestAnimationFrame(function () {\n          currentTarget.setSelectionRange(0, 1);\n        });\n      },\n      onFocus: function (_a) {\n        var currentTarget = _a.currentTarget;\n        currentTarget.setSelectionRange(0, 1);\n      },\n      onKeyDown: function (e) {\n        switch (e.key) {\n          case 'Backspace':\n            e.preventDefault();\n\n            if (!digitValue) {\n              if (i > 0) {\n                // this digit is empty, so backspace removes the previous digit\n                // and focuses it\n                onChange(val.substring(0, i - 1) + ' ' + val.substring(i));\n                var previousInput = inputs.current[i - 1];\n\n                if (previousInput) {\n                  previousInput.focus();\n                }\n              }\n            } else {\n              // this digit is not empty, so backspace removes that digit\n              onChange(val.substring(0, i) + ' ' + val.substring(i + 1));\n            }\n\n            break;\n\n          case 'ArrowUp':\n          case 'ArrowLeft':\n            e.preventDefault();\n\n            if (i > 0) {\n              var previousInput_1 = inputs.current[i - 1];\n\n              if (previousInput_1) {\n                previousInput_1.focus();\n                window.requestAnimationFrame(function () {\n                  previousInput_1.setSelectionRange(0, 1);\n                });\n              }\n            }\n\n            break;\n\n          case 'ArrowDown':\n          case 'ArrowRight':\n            e.preventDefault();\n\n            if (i + 1 < length) {\n              var nextInput_1 = inputs.current[i + 1];\n\n              if (nextInput_1) {\n                nextInput_1.focus();\n                window.requestAnimationFrame(function () {\n                  nextInput_1.setSelectionRange(0, 1);\n                });\n              }\n            }\n\n            break;\n\n          default:\n            if (e.key.length === 1 && !(e.metaKey || e.altKey || e.ctrlKey)) {\n              e.preventDefault();\n\n              if (acceptedCharacters.test(e.key)) {\n                onChange(val.substring(0, i) + e.key + val.substring(i + 1));\n\n                if (i + 1 < length) {\n                  var nextInput_2 = inputs.current[i + 1];\n\n                  if (nextInput_2) {\n                    nextInput_2.focus();\n                    window.requestAnimationFrame(function () {\n                      nextInput_2.setSelectionRange(0, 1);\n                    });\n                  }\n                } else {\n                  var currentTarget_1 = e.currentTarget;\n                  window.requestAnimationFrame(function () {\n                    currentTarget_1.setSelectionRange(0, 1);\n                  });\n                }\n              }\n            }\n\n        }\n      },\n      onChange: function (e) {\n        var v = e.target.value.split('').filter(function (c) {\n          return acceptedCharacters.test(c);\n        }).join('');\n        onChange((val.substring(0, i) + v + val.substring(i + v.length)).substr(0, length));\n\n        if (i < length - 1) {\n          var nextInput_3 = inputs.current[i + v.length < length ? i + v.length : length - 1];\n\n          if (nextInput_3) {\n            nextInput_3.focus();\n            window.requestAnimationFrame(function () {\n              nextInput_3.setSelectionRange(0, 1);\n            });\n          }\n        }\n      }\n    });\n  };\n\n  for (var i = 0; i < length; i++) {\n    _loop_1(i);\n  }\n\n  return props;\n}\n\nexports[\"default\"] = useDigitInput;\n\nfunction padValue(value, length) {\n  while (value.length < length) {\n    value += ' ';\n  }\n\n  return value.substr(0, length);\n}","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":";;;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAiBA,SAAwB,aAAxB,CAAsC,EAAtC,EAKU;MAJR,kBAAkB,GAAA,EAAA,CAAA,kB;MAClB,MAAM,GAAA,EAAA,CAAA,M;MACN,KAAK,GAAA,EAAA,CAAA,K;MACL,QAAQ,GAAA,EAAA,CAAA,Q;AAER,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAD,EAAQ,MAAR,CAApB;AACA,MAAM,MAAM,GAAG,OAAA,CAAA,MAAA,CAAyC,KAAK,CAAC,IAAN,CAAW;AAAC,IAAA,MAAM,EAAA;AAAP,GAAX,CAAzC,CAAf;AACA,MAAM,eAAe,GAAG,OAAA,CAAA,MAAA,CACtB,KAAK,CAAC,IAAN,CAAW;AAAC,IAAA,MAAM,EAAA;AAAP,GAAX,CADsB,CAAxB;AAIA,MAAM,KAAK,GAAsB,EAAjC;;0BACS,C,EAAC;AACR,QAAM,GAAG,GAAI,eAAe,CAAC,OAAhB,CAAwB,CAAxB,IACX,eAAe,CAAC,OAAhB,CAAwB,CAAxB,KACC,UAAC,KAAD,EAAM;AACL,MAAA,MAAM,CAAC,OAAP,CAAe,CAAf,IAAoB,KAAK,IAAI,SAA7B;AACD,KAJH;;AAKA,QAAM,UAAU,GAAG,GAAG,CAAC,CAAD,CAAH,KAAW,GAAX,GAAiB,EAAjB,GAAsB,GAAG,CAAC,CAAD,CAA5C;AAEA,IAAA,KAAK,CAAC,IAAN,CAAW;AACT,MAAA,GAAG,EAAA,GADM;AAET,MAAA,KAAK,EAAE,UAFE;AAGT,MAAA,OAAO,EAAE,UAAC,EAAD,EAAgB;YAAd,aAAa,GAAA,EAAA,CAAA,a;AACtB,QAAA,MAAM,CAAC,qBAAP,CAA6B,YAAA;AAC3B,UAAA,aAAa,CAAC,iBAAd,CAAgC,CAAhC,EAAmC,CAAnC;AACD,SAFD;AAGD,OAPQ;AAQT,MAAA,OAAO,EAAE,UAAC,EAAD,EAAgB;YAAd,aAAa,GAAA,EAAA,CAAA,a;AACtB,QAAA,aAAa,CAAC,iBAAd,CAAgC,CAAhC,EAAmC,CAAnC;AACD,OAVQ;AAWT,MAAA,SAAS,EAAE,UAAC,CAAD,EAAE;AACX,gBAAQ,CAAC,CAAC,GAAV;AACE,eAAK,WAAL;AACE,YAAA,CAAC,CAAC,cAAF;;AACA,gBAAI,CAAC,UAAL,EAAiB;AACf,kBAAI,CAAC,GAAG,CAAR,EAAW;AACT;AACA;AACA,gBAAA,QAAQ,CAAC,GAAG,CAAC,SAAJ,CAAc,CAAd,EAAiB,CAAC,GAAG,CAArB,IAA0B,GAA1B,GAAgC,GAAG,CAAC,SAAJ,CAAc,CAAd,CAAjC,CAAR;AACA,oBAAM,aAAa,GAAG,MAAM,CAAC,OAAP,CAAe,CAAC,GAAG,CAAnB,CAAtB;;AACA,oBAAI,aAAJ,EAAmB;AACjB,kBAAA,aAAa,CAAC,KAAd;AACD;AACF;AACF,aAVD,MAUO;AACL;AACA,cAAA,QAAQ,CAAC,GAAG,CAAC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,IAAsB,GAAtB,GAA4B,GAAG,CAAC,SAAJ,CAAc,CAAC,GAAG,CAAlB,CAA7B,CAAR;AACD;;AACD;;AACF,eAAK,SAAL;AACA,eAAK,WAAL;AACE,YAAA,CAAC,CAAC,cAAF;;AACA,gBAAI,CAAC,GAAG,CAAR,EAAW;AACT,kBAAM,eAAa,GAAG,MAAM,CAAC,OAAP,CAAe,CAAC,GAAG,CAAnB,CAAtB;;AACA,kBAAI,eAAJ,EAAmB;AACjB,gBAAA,eAAa,CAAC,KAAd;AACA,gBAAA,MAAM,CAAC,qBAAP,CAA6B,YAAA;AAC3B,kBAAA,eAAa,CAAC,iBAAd,CAAgC,CAAhC,EAAmC,CAAnC;AACD,iBAFD;AAGD;AACF;;AACD;;AACF,eAAK,WAAL;AACA,eAAK,YAAL;AACE,YAAA,CAAC,CAAC,cAAF;;AACA,gBAAI,CAAC,GAAG,CAAJ,GAAQ,MAAZ,EAAoB;AAClB,kBAAM,WAAS,GAAG,MAAM,CAAC,OAAP,CAAe,CAAC,GAAG,CAAnB,CAAlB;;AACA,kBAAI,WAAJ,EAAe;AACb,gBAAA,WAAS,CAAC,KAAV;AACA,gBAAA,MAAM,CAAC,qBAAP,CAA6B,YAAA;AAC3B,kBAAA,WAAS,CAAC,iBAAV,CAA4B,CAA5B,EAA+B,CAA/B;AACD,iBAFD;AAGD;AACF;;AACD;;AACF;AACE,gBAAI,CAAC,CAAC,GAAF,CAAM,MAAN,KAAiB,CAAjB,IAAsB,EAAE,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,MAAf,IAAyB,CAAC,CAAC,OAA7B,CAA1B,EAAiE;AAC/D,cAAA,CAAC,CAAC,cAAF;;AACA,kBAAI,kBAAkB,CAAC,IAAnB,CAAwB,CAAC,CAAC,GAA1B,CAAJ,EAAoC;AAClC,gBAAA,QAAQ,CAAC,GAAG,CAAC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,IAAsB,CAAC,CAAC,GAAxB,GAA8B,GAAG,CAAC,SAAJ,CAAc,CAAC,GAAG,CAAlB,CAA/B,CAAR;;AACA,oBAAI,CAAC,GAAG,CAAJ,GAAQ,MAAZ,EAAoB;AAClB,sBAAM,WAAS,GAAG,MAAM,CAAC,OAAP,CAAe,CAAC,GAAG,CAAnB,CAAlB;;AACA,sBAAI,WAAJ,EAAe;AACb,oBAAA,WAAS,CAAC,KAAV;AACA,oBAAA,MAAM,CAAC,qBAAP,CAA6B,YAAA;AAC3B,sBAAA,WAAS,CAAC,iBAAV,CAA4B,CAA5B,EAA+B,CAA/B;AACD,qBAFD;AAGD;AACF,iBARD,MAQO;AACL,sBAAM,eAAa,GAAG,CAAC,CAAC,aAAxB;AACA,kBAAA,MAAM,CAAC,qBAAP,CAA6B,YAAA;AAC3B,oBAAA,eAAa,CAAC,iBAAd,CAAgC,CAAhC,EAAmC,CAAnC;AACD,mBAFD;AAGD;AACF;AACF;;AAhEL;AAkED,OA9EQ;AA+ET,MAAA,QAAQ,EAAE,UAAC,CAAD,EAAE;AACV,YAAM,CAAC,GAAG,CAAC,CAAC,MAAF,CAAS,KAAT,CACP,KADO,CACD,EADC,EAEP,MAFO,CAEA,UAAC,CAAD,EAAE;AAAK,iBAAA,kBAAkB,CAAC,IAAnB,CAAA,CAAA,CAAA;AAA0B,SAFjC,EAGP,IAHO,CAGF,EAHE,CAAV;AAIA,QAAA,QAAQ,CACN,CAAC,GAAG,CAAC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,IAAsB,CAAtB,GAA0B,GAAG,CAAC,SAAJ,CAAc,CAAC,GAAG,CAAC,CAAC,MAApB,CAA3B,EAAwD,MAAxD,CACE,CADF,EAEE,MAFF,CADM,CAAR;;AAMA,YAAI,CAAC,GAAG,MAAM,GAAG,CAAjB,EAAoB;AAClB,cAAM,WAAS,GACb,MAAM,CAAC,OAAP,CAAe,CAAC,GAAG,CAAC,CAAC,MAAN,GAAe,MAAf,GAAwB,CAAC,GAAG,CAAC,CAAC,MAA9B,GAAuC,MAAM,GAAG,CAA/D,CADF;;AAEA,cAAI,WAAJ,EAAe;AACb,YAAA,WAAS,CAAC,KAAV;AACA,YAAA,MAAM,CAAC,qBAAP,CAA6B,YAAA;AAC3B,cAAA,WAAS,CAAC,iBAAV,CAA4B,CAA5B,EAA+B,CAA/B;AACD,aAFD;AAGD;AACF;AACF;AApGQ,KAAX;;;AARF,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAApB,EAA4B,CAAC,EAA7B,EAA+B;YAAtB,C;AA8GR;;AACD,SAAO,KAAP;AACD;;AA7HD,OAAA,CAAA,SAAA,CAAA,GAAA,aAAA;;AA+HA,SAAS,QAAT,CAAkB,KAAlB,EAAiC,MAAjC,EAA+C;AAC7C,SAAO,KAAK,CAAC,MAAN,GAAe,MAAtB,EAA8B;AAC5B,IAAA,KAAK,IAAI,GAAT;AACD;;AACD,SAAO,KAAK,CAAC,MAAN,CAAa,CAAb,EAAgB,MAAhB,CAAP;AACD","sourceRoot":"","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar react_1 = require(\"react\");\nfunction useDigitInput(_a) {\n    var acceptedCharacters = _a.acceptedCharacters, length = _a.length, value = _a.value, onChange = _a.onChange;\n    var val = padValue(value, length);\n    var inputs = react_1.useRef(Array.from({ length: length }));\n    var inputRefSetters = react_1.useRef(Array.from({ length: length }));\n    var props = [];\n    var _loop_1 = function (i) {\n        var ref = (inputRefSetters.current[i] =\n            inputRefSetters.current[i] ||\n                (function (input) {\n                    inputs.current[i] = input || undefined;\n                }));\n        var digitValue = val[i] === ' ' ? '' : val[i];\n        props.push({\n            ref: ref,\n            value: digitValue,\n            onClick: function (_a) {\n                var currentTarget = _a.currentTarget;\n                window.requestAnimationFrame(function () {\n                    currentTarget.setSelectionRange(0, 1);\n                });\n            },\n            onFocus: function (_a) {\n                var currentTarget = _a.currentTarget;\n                currentTarget.setSelectionRange(0, 1);\n            },\n            onKeyDown: function (e) {\n                switch (e.key) {\n                    case 'Backspace':\n                        e.preventDefault();\n                        if (!digitValue) {\n                            if (i > 0) {\n                                // this digit is empty, so backspace removes the previous digit\n                                // and focuses it\n                                onChange(val.substring(0, i - 1) + ' ' + val.substring(i));\n                                var previousInput = inputs.current[i - 1];\n                                if (previousInput) {\n                                    previousInput.focus();\n                                }\n                            }\n                        }\n                        else {\n                            // this digit is not empty, so backspace removes that digit\n                            onChange(val.substring(0, i) + ' ' + val.substring(i + 1));\n                        }\n                        break;\n                    case 'ArrowUp':\n                    case 'ArrowLeft':\n                        e.preventDefault();\n                        if (i > 0) {\n                            var previousInput_1 = inputs.current[i - 1];\n                            if (previousInput_1) {\n                                previousInput_1.focus();\n                                window.requestAnimationFrame(function () {\n                                    previousInput_1.setSelectionRange(0, 1);\n                                });\n                            }\n                        }\n                        break;\n                    case 'ArrowDown':\n                    case 'ArrowRight':\n                        e.preventDefault();\n                        if (i + 1 < length) {\n                            var nextInput_1 = inputs.current[i + 1];\n                            if (nextInput_1) {\n                                nextInput_1.focus();\n                                window.requestAnimationFrame(function () {\n                                    nextInput_1.setSelectionRange(0, 1);\n                                });\n                            }\n                        }\n                        break;\n                    default:\n                        if (e.key.length === 1 && !(e.metaKey || e.altKey || e.ctrlKey)) {\n                            e.preventDefault();\n                            if (acceptedCharacters.test(e.key)) {\n                                onChange(val.substring(0, i) + e.key + val.substring(i + 1));\n                                if (i + 1 < length) {\n                                    var nextInput_2 = inputs.current[i + 1];\n                                    if (nextInput_2) {\n                                        nextInput_2.focus();\n                                        window.requestAnimationFrame(function () {\n                                            nextInput_2.setSelectionRange(0, 1);\n                                        });\n                                    }\n                                }\n                                else {\n                                    var currentTarget_1 = e.currentTarget;\n                                    window.requestAnimationFrame(function () {\n                                        currentTarget_1.setSelectionRange(0, 1);\n                                    });\n                                }\n                            }\n                        }\n                }\n            },\n            onChange: function (e) {\n                var v = e.target.value\n                    .split('')\n                    .filter(function (c) { return acceptedCharacters.test(c); })\n                    .join('');\n                onChange((val.substring(0, i) + v + val.substring(i + v.length)).substr(0, length));\n                if (i < length - 1) {\n                    var nextInput_3 = inputs.current[i + v.length < length ? i + v.length : length - 1];\n                    if (nextInput_3) {\n                        nextInput_3.focus();\n                        window.requestAnimationFrame(function () {\n                            nextInput_3.setSelectionRange(0, 1);\n                        });\n                    }\n                }\n            }\n        });\n    };\n    for (var i = 0; i < length; i++) {\n        _loop_1(i);\n    }\n    return props;\n}\nexports[\"default\"] = useDigitInput;\nfunction padValue(value, length) {\n    while (value.length < length) {\n        value += ' ';\n    }\n    return value.substr(0, length);\n}\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}