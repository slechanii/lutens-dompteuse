{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/slechani/dompteuse-react/src/components/modalcarousel/ModalCarousel.tsx\";\nimport React, { createRef } from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs from 'video.js';\nimport { isMobile } from 'mobile-device-detect';\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport 'simplebar/dist/simplebar.min.css';\nimport './ModalCarousel.css';\nimport Mute from '../mute/Mute';\nimport PlayButton from '../playButton/PlayButton';\nimport { muteVideo, unmuteVideo } from 'src/store/root/actions';\nimport { connect } from 'react-redux';\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  controls: false,\n  fill: true,\n  preload: 'auto'\n};\nModal.setAppElement('#root');\nconst styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'rgba(0,0,0,0.9)'\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20\n  }\n};\n\nclass ModalCarousel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.video1Ref = /*#__PURE__*/createRef();\n    this.video2Ref = /*#__PURE__*/createRef();\n    this.videoJs1 = null;\n    this.videoJs2 = null;\n\n    this._setupVideoJs1 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video1Ref: this.video1Ref.current,\n        videoJs1: this.videoJs1\n      });\n\n      if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n        this.videoJs1 = videojs(this.video1Ref.current, options);\n        this.videoJs1.on('ended', () => {\n          this.setState({\n            video1Ended: true\n          });\n        });\n        this.videoJs1.on('play', () => {\n          this.setState({\n            video1Ended: false\n          });\n        });\n        this.videoJs1.loop(false);\n        this.videoJs1.muted(this.props.videoMuted);\n        this.videoJs1.autoplay(true);\n      } else if (this.videoJs1) {\n        this.videoJs1.muted(this.props.videoMuted);\n        this.videoJs1.play();\n      }\n\n      if (isMobile && this.videoJs1 !== null) {\n        this.videoJs1.muted(this.props.videoMuted);\n        this.videoJs1.play();\n      }\n    };\n\n    this._setupVideoJs2 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video2Ref: this.video2Ref.current,\n        videoJs2: this.videoJs2\n      });\n\n      if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n        this.videoJs2 = videojs(this.video2Ref.current, options);\n        this.videoJs2.on('ended', () => {\n          this.setState({\n            video2Ended: true\n          });\n        });\n        this.videoJs2.on('play', () => {\n          this.setState({\n            video2Ended: false\n          });\n        });\n        this.videoJs2.loop(false);\n        this.videoJs2.muted(this.props.videoMuted);\n        this.videoJs2.autoplay(true);\n      } else if (this.videoJs2) {\n        this.videoJs2.muted(this.props.videoMuted);\n        this.videoJs2.play();\n      }\n\n      if (isMobile && this.videoJs2 !== null) {\n        this.videoJs2.muted(this.props.videoMuted);\n        this.videoJs2.play();\n      }\n    };\n\n    this._dispose = () => {\n      console.log('_dispose');\n\n      if (this.videoJs1 !== null) {\n        this.videoJs1.dispose();\n        this.videoJs1 = null;\n      }\n\n      if (this.videoJs2 !== null) {\n        this.videoJs2.dispose();\n        this.videoJs2 = null;\n      }\n    };\n\n    this._onAfterOpen = () => {\n      this._setupVideoJs1();\n    };\n\n    this._onAfterClose = () => {\n      this._dispose();\n\n      this.setState({\n        slideIndex: 0\n      });\n    };\n\n    this._toggleMute = () => {\n      var _this$videoJs, _this$videoJs2;\n\n      this.props.videoMuted ? this.props.unmuteVideo() : this.props.muteVideo();\n      (_this$videoJs = this.videoJs1) === null || _this$videoJs === void 0 ? void 0 : _this$videoJs.muted(!this.props.videoMuted);\n      (_this$videoJs2 = this.videoJs2) === null || _this$videoJs2 === void 0 ? void 0 : _this$videoJs2.muted(!this.props.videoMuted);\n    };\n\n    this.state = {\n      slideIndex: 0,\n      video1Ended: false,\n      video2Ended: false\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log('componentDidUpdate');\n\n    if (this.state.previousSlideIndex !== this.state.slideIndex) {\n      if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n        this._setupVideoJs1();\n      }\n\n      if (this.state.slideIndex === 3 && prevProps.isOpen === true) {\n        this._setupVideoJs2();\n      }\n\n      this.setState({\n        previousSlideIndex: this.state.slideIndex\n      });\n    }\n  }\n\n  render() {\n    const {\n      slideIndex\n    } = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      imageTitle,\n      description,\n      imageMobileBackground,\n      videoMuted\n    } = this.props;\n    let backgroundImage = '';\n\n    if (slideIndex === 2 && isMobile) {\n      backgroundImage = `url(${imageMobileBackground})`;\n    } else if (slideIndex === 2) {\n      backgroundImage = `var(--background-image-slide3)`;\n    }\n\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpen,\n      style: styles,\n      onAfterOpen: this._onAfterOpen,\n      onAfterClose: this._onAfterClose,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-carousel\",\n        style: {\n          ['--background-image']: backgroundImage\n        },\n        children: [/*#__PURE__*/_jsxDEV(Carousel, {\n          interval: null,\n          activeIndex: slideIndex,\n          onSelect: slideIndex => this.setState({\n            slideIndex\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video1Ref,\n              className: \"video-js custom-videojs\",\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Mute, {\n              isMuted: videoMuted,\n              onClick: this._toggleMute\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(PlayButton, {\n              show: this.state.video1Ended,\n              onClick: () => {\n                var _this$videoJs3;\n\n                (_this$videoJs3 = this.videoJs1) === null || _this$videoJs3 === void 0 ? void 0 : _this$videoJs3.play();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-2-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"citation\",\n                  children: citation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"serge\",\n                  children: \"Serge Lutens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: citationSmall\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-3-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: imageTitle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"description\",\n                    children: Array.isArray(description) ? description.map((d, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: d\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 55\n                    }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video2Ref,\n              className: 'video-js custom-videojs',\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), this.props.video2HideMute ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(Mute, {\n              isMuted: videoMuted,\n              onClick: this._toggleMute\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 52\n            }, this), /*#__PURE__*/_jsxDEV(PlayButton, {\n              show: this.state.video2Ended,\n              onClick: () => {\n                var _this$videoJs4;\n\n                (_this$videoJs4 = this.videoJs2) === null || _this$videoJs4 === void 0 ? void 0 : _this$videoJs4.play();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"close-btn\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeBtn,\n            srcSet: closeBtn2x,\n            onClick: onClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    videoMuted: state.videoMuted\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    muteVideo: () => dispatch(muteVideo()),\n    unmuteVideo: () => dispatch(unmuteVideo())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalCarousel);","map":{"version":3,"sources":["/home/slechani/dompteuse-react/src/components/modalcarousel/ModalCarousel.tsx"],"names":["React","createRef","Modal","Carousel","videojs","isMobile","closeBtn","closeBtn2x","Mute","PlayButton","muteVideo","unmuteVideo","connect","options","html5","fluid","loop","controls","fill","preload","setAppElement","styles","overlay","zIndex","background","content","border","padding","backgroundColor","top","bottom","left","right","ModalCarousel","Component","constructor","props","video1Ref","video2Ref","videoJs1","videoJs2","_setupVideoJs1","console","log","current","undefined","on","setState","video1Ended","muted","videoMuted","autoplay","play","_setupVideoJs2","video2Ended","_dispose","dispose","_onAfterOpen","_onAfterClose","slideIndex","_toggleMute","state","componentDidUpdate","prevProps","previousSlideIndex","isOpen","render","onClose","video1","video1Webm","video2","video2Webm","citation","citationSmall","image","imageTitle","description","imageMobileBackground","backgroundImage","Array","isArray","map","d","index","video2HideMute","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {createRef} from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs, {VideoJsPlayer} from 'video.js';\nimport {isMobile} from 'mobile-device-detect';\n\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport 'simplebar/dist/simplebar.min.css';\nimport './ModalCarousel.css';\nimport Mute from '../mute/Mute';\nimport PlayButton from '../playButton/PlayButton';\nimport {RootActionTypes} from 'src/store/root/types';\nimport {ReduxAppState} from 'src/store';\nimport {Dispatch} from 'redux';\nimport {muteVideo, unmuteVideo} from 'src/store/root/actions';\nimport {connect} from 'react-redux';\n\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  controls: false,\n  fill: true,\n  preload: 'auto',\n};\n\nModal.setAppElement('#root');\n\nconst styles: Modal.Styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'rgba(0,0,0,0.9)',\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20,\n  },\n};\n\ntype StateProps = {\n  videoMuted: boolean;\n};\ntype DispatchProps = {\n  muteVideo: () => RootActionTypes;\n  unmuteVideo: () => RootActionTypes;\n};\n\ntype OwnProps = {\n  isOpen: boolean;\n  video1: string;\n  video1Webm: string;\n  video2: string;\n  video2Webm: string;\n  video2HideMute?: boolean;\n  citation: string;\n  citationSmall: string;\n  image: string;\n  imageMobileBackground: string;\n  imageTitle: string;\n  description: string[] | string;\n  onClose?: () => void;\n};\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ntype State = {\n  slideIndex: number;\n  previousSlideIndex?: number;\n  video1Ended: boolean;\n  video2Ended: boolean;\n};\n\nclass ModalCarousel extends React.Component<Props, State> {\n  private video1Ref = createRef<HTMLVideoElement>();\n  private video2Ref = createRef<HTMLVideoElement>();\n  private videoJs1: VideoJsPlayer | null = null;\n  private videoJs2: VideoJsPlayer | null = null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      slideIndex: 0,\n      video1Ended: false,\n      video2Ended: false,\n    };\n  }\n  componentDidUpdate(prevProps: Props): void {\n    console.log('componentDidUpdate');\n    if (this.state.previousSlideIndex !== this.state.slideIndex) {\n      if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n        this._setupVideoJs1();\n      }\n      if (this.state.slideIndex === 3 && prevProps.isOpen === true) {\n        this._setupVideoJs2();\n      }\n      this.setState({previousSlideIndex: this.state.slideIndex});\n    }\n  }\n\n  _setupVideoJs1 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video1Ref: this.video1Ref.current, videoJs1: this.videoJs1});\n    if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n      this.videoJs1 = videojs(this.video1Ref.current, options);\n      this.videoJs1.on('ended', () => {\n        this.setState({video1Ended: true});\n      });\n      this.videoJs1.on('play', () => {\n        this.setState({video1Ended: false});\n      });\n      this.videoJs1.loop(false);\n      this.videoJs1.muted(this.props.videoMuted);\n      this.videoJs1.autoplay(true);\n    } else if (this.videoJs1) {\n      this.videoJs1.muted(this.props.videoMuted);\n      this.videoJs1.play();\n    }\n    if (isMobile && this.videoJs1 !== null) {\n      this.videoJs1.muted(this.props.videoMuted);\n      this.videoJs1.play();\n    }\n  };\n  _setupVideoJs2 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video2Ref: this.video2Ref.current, videoJs2: this.videoJs2});\n    if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n      this.videoJs2 = videojs(this.video2Ref.current, options);\n      this.videoJs2.on('ended', () => {\n        this.setState({video2Ended: true});\n      });\n      this.videoJs2.on('play', () => {\n        this.setState({video2Ended: false});\n      });\n      this.videoJs2.loop(false);\n      this.videoJs2.muted(this.props.videoMuted);\n      this.videoJs2.autoplay(true);\n    } else if (this.videoJs2) {\n      this.videoJs2.muted(this.props.videoMuted);\n      this.videoJs2.play();\n    }\n    if (isMobile && this.videoJs2 !== null) {\n      this.videoJs2.muted(this.props.videoMuted);\n      this.videoJs2.play();\n    }\n  };\n\n  _dispose = (): void => {\n    console.log('_dispose');\n    if (this.videoJs1 !== null) {\n      this.videoJs1.dispose();\n      this.videoJs1 = null;\n    }\n    if (this.videoJs2 !== null) {\n      this.videoJs2.dispose();\n      this.videoJs2 = null;\n    }\n  };\n  _onAfterOpen = (): void => {\n    this._setupVideoJs1();\n  };\n\n  _onAfterClose = (): void => {\n    this._dispose();\n    this.setState({slideIndex: 0});\n  };\n\n  _toggleMute = (): void => {\n    this.props.videoMuted ? this.props.unmuteVideo() : this.props.muteVideo();\n    this.videoJs1?.muted(!this.props.videoMuted);\n    this.videoJs2?.muted(!this.props.videoMuted);\n  };\n\n  render(): JSX.Element {\n    const {slideIndex} = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      imageTitle,\n      description,\n      imageMobileBackground,\n      videoMuted,\n    } = this.props;\n    let backgroundImage = '';\n    if (slideIndex === 2 && isMobile) {\n      backgroundImage = `url(${imageMobileBackground})`;\n    } else if (slideIndex === 2) {\n      backgroundImage = `var(--background-image-slide3)`;\n    }\n    return (\n      <Modal isOpen={isOpen} style={styles} onAfterOpen={this._onAfterOpen} onAfterClose={this._onAfterClose}>\n        <div\n          className=\"modal-carousel\"\n          style={{\n            ['--background-image' as never]: backgroundImage,\n          }}>\n          <Carousel interval={null} activeIndex={slideIndex} onSelect={(slideIndex) => this.setState({slideIndex})}>\n            <Carousel.Item>\n              <video\n                ref={this.video1Ref}\n                className=\"video-js custom-videojs\"\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video1} type=\"video/mp4\" />\n                <source src={video1Webm} type=\"video/webm\" />\n              </video>\n              <Mute isMuted={videoMuted} onClick={this._toggleMute} />\n              <PlayButton\n                show={this.state.video1Ended}\n                onClick={() => {\n                  this.videoJs1?.play();\n                }}\n              />\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-2\">\n                <div className=\"section-2-content\">\n                  <h2 className=\"citation\">{citation}</h2>\n                  <h2 className=\"serge\">Serge Lutens</h2>\n                  <hr />\n                  <small>{citationSmall}</small>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-3\">\n                <div className=\"section-3-content\">\n                  <img src={image} />\n                  <div>\n                    <h3>{imageTitle}</h3>\n                    <div className=\"description\">\n                      {Array.isArray(description) ? (\n                        description.map((d, index) => <p key={index}>{d}</p>)\n                      ) : (\n                        <p>{description}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <video\n                ref={this.video2Ref}\n                className={'video-js custom-videojs'}\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video2} type=\"video/mp4\" />\n                <source src={video2Webm} type=\"video/webm\" />\n              </video>\n              {this.props.video2HideMute ? <></> : <Mute isMuted={videoMuted} onClick={this._toggleMute} />}\n              <PlayButton\n                show={this.state.video2Ended}\n                onClick={() => {\n                  this.videoJs2?.play();\n                }}\n              />\n            </Carousel.Item>\n          </Carousel>\n          <div className=\"close-btn\">\n            <img src={closeBtn} srcSet={closeBtn2x} onClick={onClose} />\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nconst mapStateToProps = (state: ReduxAppState): StateProps => {\n  return {\n    videoMuted: state.videoMuted,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    muteVideo: () => dispatch(muteVideo()),\n    unmuteVideo: () => dispatch(unmuteVideo()),\n  };\n};\n\nexport default connect<StateProps, DispatchProps, unknown, ReduxAppState>(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ModalCarousel);\n"]},"metadata":{},"sourceType":"module"}