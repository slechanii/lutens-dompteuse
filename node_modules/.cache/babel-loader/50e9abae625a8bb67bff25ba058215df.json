{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/slechani/react-ladompteuse-website/src/components/modalcarousel/ModalCarousel.tsx\";\nimport React, { createRef } from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs from 'video.js';\nimport { isMobile } from 'mobile-device-detect';\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport 'simplebar/dist/simplebar.min.css';\nimport './ModalCarousel.css';\nimport Mute from '../mute/Mute';\nimport PlayButton from '../playButton/PlayButton';\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  muted: true,\n  controls: false,\n  fill: true,\n  preload: 'auto'\n};\nModal.setAppElement('#root');\nconst styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'rgba(0,0,0,0.9)'\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20\n  }\n};\n\nclass ModalCarousel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.video1Ref = /*#__PURE__*/createRef();\n    this.video2Ref = /*#__PURE__*/createRef();\n    this.videoJs1 = null;\n    this.videoJs2 = null;\n\n    this._setupVideoJs1 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video1Ref: this.video1Ref.current,\n        videoJs1: this.videoJs1\n      });\n\n      if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n        this.videoJs1 = videojs(this.video1Ref.current, options);\n        this.videoJs1.on('ended', () => {\n          this.setState({\n            video1Ended: true\n          });\n        });\n        this.videoJs1.on('play', () => {\n          this.setState({\n            video1Ended: false\n          });\n        });\n        this.videoJs1.loop(false);\n        this.videoJs1.autoplay(true);\n      } else if (this.videoJs1) {\n        this.videoJs1.play();\n      }\n\n      if (isMobile && this.videoJs1 !== null) {\n        this.videoJs1.play();\n      }\n    };\n\n    this._setupVideoJs2 = () => {\n      console.log('_setupVideoJs');\n      console.log({\n        video2Ref: this.video2Ref.current,\n        videoJs2: this.videoJs2\n      });\n\n      if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n        this.videoJs2 = videojs(this.video2Ref.current, options);\n        this.videoJs2.on('ended', () => {\n          this.setState({\n            video2Ended: true\n          });\n        });\n        this.videoJs2.on('play', () => {\n          this.setState({\n            video2Ended: false\n          });\n        });\n        this.videoJs2.loop(false);\n        this.videoJs2.autoplay(true);\n      } else if (this.videoJs2) {\n        this.videoJs2.play();\n      }\n\n      if (isMobile && this.videoJs2 !== null) {\n        this.videoJs2.play();\n      }\n    };\n\n    this._dispose = () => {\n      console.log('_dispose');\n\n      if (this.videoJs1 !== null) {\n        this.videoJs1.dispose();\n        this.videoJs1 = null;\n      }\n\n      if (this.videoJs2 !== null) {\n        this.videoJs2.dispose();\n        this.videoJs2 = null;\n      }\n    };\n\n    this._onAfterOpen = () => {\n      this._setupVideoJs1();\n    };\n\n    this._onAfterClose = () => {\n      this._dispose();\n\n      this.setState({\n        slideIndex: 0\n      });\n    };\n\n    this.state = {\n      slideIndex: 0,\n      mute1: true,\n      mute2: true,\n      video1Ended: false,\n      video2Ended: false\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log('componentDidUpdate');\n\n    if (this.state.previousSlideIndex !== this.state.slideIndex) {\n      if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n        this._setupVideoJs1();\n      }\n\n      if (this.state.slideIndex === 3 && prevProps.isOpen === true) {\n        this._setupVideoJs2();\n      }\n\n      this.setState({\n        previousSlideIndex: this.state.slideIndex\n      });\n    }\n  }\n\n  render() {\n    const {\n      slideIndex,\n      mute1,\n      mute2\n    } = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      imageTitle,\n      description,\n      imageMobileBackground\n    } = this.props;\n    let backgroundImage = '';\n\n    if (slideIndex === 2 && isMobile) {\n      backgroundImage = `url(${imageMobileBackground})`;\n    } else if (slideIndex === 2) {\n      backgroundImage = `var(--background-image-slide3)`;\n    }\n\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpen,\n      style: styles,\n      onAfterOpen: this._onAfterOpen,\n      onAfterClose: this._onAfterClose,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-carousel\",\n        style: {\n          ['--background-image']: backgroundImage\n        },\n        children: [/*#__PURE__*/_jsxDEV(Carousel, {\n          interval: null,\n          activeIndex: slideIndex,\n          onSelect: slideIndex => this.setState({\n            slideIndex\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video1Ref,\n              className: \"video-js custom-videojs\",\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video1Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Mute, {\n              isMuted: mute1,\n              onClick: () => {\n                var _this$videoJs;\n\n                this.setState({\n                  mute1: !mute1\n                });\n                (_this$videoJs = this.videoJs1) === null || _this$videoJs === void 0 ? void 0 : _this$videoJs.muted(!mute1);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(PlayButton, {\n              show: this.state.video1Ended,\n              onClick: () => {\n                var _this$videoJs2;\n\n                (_this$videoJs2 = this.videoJs1) === null || _this$videoJs2 === void 0 ? void 0 : _this$videoJs2.play();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-2-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"citation\",\n                  children: citation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"serge\",\n                  children: \"Serge Lutens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: citationSmall\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"section-3-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: imageTitle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"description\",\n                    children: Array.isArray(description) ? description.map((d, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: d\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 55\n                    }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Carousel.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: this.video2Ref,\n              className: 'video-js custom-videojs',\n              playsInline: true,\n              \"webkit-playsinline\": \"true\",\n              controls: false,\n              children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2,\n                type: \"video/mp4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                src: video2Webm,\n                type: \"video/webm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Mute, {\n              isMuted: mute2,\n              onClick: () => {\n                var _this$videoJs3;\n\n                this.setState({\n                  mute2: !mute2\n                });\n                (_this$videoJs3 = this.videoJs2) === null || _this$videoJs3 === void 0 ? void 0 : _this$videoJs3.muted(!mute2);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(PlayButton, {\n              show: this.state.video2Ended,\n              onClick: () => {\n                var _this$videoJs4;\n\n                (_this$videoJs4 = this.videoJs2) === null || _this$videoJs4 === void 0 ? void 0 : _this$videoJs4.play();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"close-btn\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeBtn,\n            srcSet: closeBtn2x,\n            onClick: onClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ModalCarousel;","map":{"version":3,"sources":["/home/slechani/react-ladompteuse-website/src/components/modalcarousel/ModalCarousel.tsx"],"names":["React","createRef","Modal","Carousel","videojs","isMobile","closeBtn","closeBtn2x","Mute","PlayButton","options","html5","fluid","loop","muted","controls","fill","preload","setAppElement","styles","overlay","zIndex","background","content","border","padding","backgroundColor","top","bottom","left","right","ModalCarousel","Component","constructor","props","video1Ref","video2Ref","videoJs1","videoJs2","_setupVideoJs1","console","log","current","undefined","on","setState","video1Ended","autoplay","play","_setupVideoJs2","video2Ended","_dispose","dispose","_onAfterOpen","_onAfterClose","slideIndex","state","mute1","mute2","componentDidUpdate","prevProps","previousSlideIndex","isOpen","render","onClose","video1","video1Webm","video2","video2Webm","citation","citationSmall","image","imageTitle","description","imageMobileBackground","backgroundImage","Array","isArray","map","d","index"],"mappings":"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","sourcesContent":["import React, {createRef} from 'react';\nimport Modal from 'react-modal';\nimport Carousel from 'react-bootstrap/Carousel';\nimport videojs, {VideoJsPlayer} from 'video.js';\nimport {isMobile} from 'mobile-device-detect';\n\nimport closeBtn from '../../assets/img/button_close.png';\nimport closeBtn2x from '../../assets/img/button_close@2x.png';\nimport 'simplebar/dist/simplebar.min.css';\nimport './ModalCarousel.css';\nimport Mute from '../mute/Mute';\nimport PlayButton from '../playButton/PlayButton';\n\nconst options = {\n  html5: true,\n  fluid: true,\n  loop: false,\n  muted: true,\n  controls: false,\n  fill: true,\n  preload: 'auto',\n};\n\nModal.setAppElement('#root');\n\nconst styles: Modal.Styles = {\n  overlay: {\n    zIndex: 10,\n    background: 'rgba(0,0,0,0.9)',\n  },\n  content: {\n    border: 'none',\n    padding: 0,\n    backgroundColor: 'black',\n    top: 30,\n    bottom: 30,\n    left: 20,\n    right: 20,\n  },\n};\n\ntype Props = {\n  isOpen: boolean;\n  video1: string;\n  video1Webm: string;\n  video2: string;\n  video2Webm: string;\n  citation: string;\n  citationSmall: string;\n  image: string;\n  imageMobileBackground: string;\n  imageTitle: string;\n  description: string[] | string;\n  onClose?: () => void;\n};\n\ntype State = {\n  slideIndex: number;\n  previousSlideIndex?: number;\n  mute1: boolean;\n  video1Ended: boolean;\n  mute2: boolean;\n  video2Ended: boolean;\n};\n\nclass ModalCarousel extends React.Component<Props, State> {\n  private video1Ref = createRef<HTMLVideoElement>();\n  private video2Ref = createRef<HTMLVideoElement>();\n  private videoJs1: VideoJsPlayer | null = null;\n  private videoJs2: VideoJsPlayer | null = null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      slideIndex: 0,\n      mute1: true,\n      mute2: true,\n      video1Ended: false,\n      video2Ended: false,\n    };\n  }\n  componentDidUpdate(prevProps: Props): void {\n    console.log('componentDidUpdate');\n    if (this.state.previousSlideIndex !== this.state.slideIndex) {\n      if (this.state.slideIndex === 0 && prevProps.isOpen === true) {\n        this._setupVideoJs1();\n      }\n      if (this.state.slideIndex === 3 && prevProps.isOpen === true) {\n        this._setupVideoJs2();\n      }\n      this.setState({previousSlideIndex: this.state.slideIndex});\n    }\n  }\n\n  _setupVideoJs1 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video1Ref: this.video1Ref.current, videoJs1: this.videoJs1});\n    if (this.videoJs1 === null && this.video1Ref.current !== undefined) {\n      this.videoJs1 = videojs(this.video1Ref.current, options);\n      this.videoJs1.on('ended', () => {\n        this.setState({video1Ended: true});\n      });\n      this.videoJs1.on('play', () => {\n        this.setState({video1Ended: false});\n      });\n      this.videoJs1.loop(false);\n      this.videoJs1.autoplay(true);\n    } else if (this.videoJs1) {\n      this.videoJs1.play();\n    }\n    if (isMobile && this.videoJs1 !== null) {\n      this.videoJs1.play();\n    }\n  };\n  _setupVideoJs2 = (): void => {\n    console.log('_setupVideoJs');\n    console.log({video2Ref: this.video2Ref.current, videoJs2: this.videoJs2});\n    if (this.videoJs2 === null && this.video2Ref.current !== undefined) {\n      this.videoJs2 = videojs(this.video2Ref.current, options);\n      this.videoJs2.on('ended', () => {\n        this.setState({video2Ended: true});\n      });\n      this.videoJs2.on('play', () => {\n        this.setState({video2Ended: false});\n      });\n      this.videoJs2.loop(false);\n      this.videoJs2.autoplay(true);\n    } else if (this.videoJs2) {\n      this.videoJs2.play();\n    }\n    if (isMobile && this.videoJs2 !== null) {\n      this.videoJs2.play();\n    }\n  };\n\n  _dispose = (): void => {\n    console.log('_dispose');\n    if (this.videoJs1 !== null) {\n      this.videoJs1.dispose();\n      this.videoJs1 = null;\n    }\n    if (this.videoJs2 !== null) {\n      this.videoJs2.dispose();\n      this.videoJs2 = null;\n    }\n  };\n  _onAfterOpen = (): void => {\n    this._setupVideoJs1();\n  };\n\n  _onAfterClose = (): void => {\n    this._dispose();\n    this.setState({slideIndex: 0});\n  };\n\n  render(): JSX.Element {\n    const {slideIndex, mute1, mute2} = this.state;\n    const {\n      isOpen,\n      onClose,\n      video1,\n      video1Webm,\n      video2,\n      video2Webm,\n      citation,\n      citationSmall,\n      image,\n      imageTitle,\n      description,\n      imageMobileBackground,\n    } = this.props;\n    let backgroundImage = '';\n    if (slideIndex === 2 && isMobile) {\n      backgroundImage = `url(${imageMobileBackground})`;\n    } else if (slideIndex === 2) {\n      backgroundImage = `var(--background-image-slide3)`;\n    }\n    return (\n      <Modal isOpen={isOpen} style={styles} onAfterOpen={this._onAfterOpen} onAfterClose={this._onAfterClose}>\n        <div\n          className=\"modal-carousel\"\n          style={{\n            ['--background-image' as any]: backgroundImage,\n          }}>\n          <Carousel interval={null} activeIndex={slideIndex} onSelect={(slideIndex) => this.setState({slideIndex})}>\n            <Carousel.Item>\n              <video\n                ref={this.video1Ref}\n                className=\"video-js custom-videojs\"\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video1} type=\"video/mp4\" />\n                <source src={video1Webm} type=\"video/webm\" />\n              </video>\n              <Mute\n                isMuted={mute1}\n                onClick={() => {\n                  this.setState({mute1: !mute1});\n                  this.videoJs1?.muted(!mute1);\n                }}\n              />\n              <PlayButton\n                show={this.state.video1Ended}\n                onClick={() => {\n                  this.videoJs1?.play();\n                }}\n              />\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-2\">\n                <div className=\"section-2-content\">\n                  <h2 className=\"citation\">{citation}</h2>\n                  <h2 className=\"serge\">Serge Lutens</h2>\n                  <hr />\n                  <small>{citationSmall}</small>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <div className=\"section-3\">\n                <div className=\"section-3-content\">\n                  <img src={image} />\n                  <div>\n                    <h3>{imageTitle}</h3>\n                    <div className=\"description\">\n                      {Array.isArray(description) ? (\n                        description.map((d, index) => <p key={index}>{d}</p>)\n                      ) : (\n                        <p>{description}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Carousel.Item>\n            <Carousel.Item>\n              <video\n                ref={this.video2Ref}\n                className={'video-js custom-videojs'}\n                playsInline\n                webkit-playsinline=\"true\"\n                controls={false}>\n                <source src={video2} type=\"video/mp4\" />\n                <source src={video2Webm} type=\"video/webm\" />\n              </video>\n              <Mute\n                isMuted={mute2}\n                onClick={() => {\n                  this.setState({mute2: !mute2});\n                  this.videoJs2?.muted(!mute2);\n                }}\n              />\n              <PlayButton\n                show={this.state.video2Ended}\n                onClick={() => {\n                  this.videoJs2?.play();\n                }}\n              />\n            </Carousel.Item>\n          </Carousel>\n          <div className=\"close-btn\">\n            <img src={closeBtn} srcSet={closeBtn2x} onClick={onClose} />\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default ModalCarousel;\n"]},"metadata":{},"sourceType":"module"}